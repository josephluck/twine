(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function noop(){return null}function arrayToObj(e,t){return Object.assign({},e,t)}function merge(e,t){if(e.models){var r=Object.keys(e.models).map(function(r){return n={},n[r]=merge(e.models[r],t),n;var n}).reduce(arrayToObj,{});return Object.assign({},e[t],r)}return e[t]}function createState(e){return merge(e,"state")}function retrieveNestedModel(e,t,r){if(void 0===r&&(r=0),e.models){var n=e.models[t[r]];return n&&n.models&&n.models[t[r+1]]?retrieveNestedModel(n,t,r+1):n}return e}function getNestedObjFromPath(e,t){return t.length?getNestedObjFromPath(e[t[0]],t.slice(1)):e}function updateStateAtPath(e,t,r){var n,o;return Array.isArray(t)&&t.length>0&&(n=t.slice(),o=n[0],n.length>1?(n.shift(),e[o]=updateStateAtPath(e[o],n,r)):e[o]=r),e}function twine(e){e||(e=noop);var t="function"==typeof e?e:e.onStateChange||noop,r="function"==typeof e?noop:e.onMethodCall||noop;return function(e){function n(n,o,u){var s=Object.keys(n||{}).map(function(e){return o={},o[e]=function(){var o=Object.assign({},a),s=u.length?getNestedObjFromPath(a,u):a,l=[s].concat(Array.prototype.slice.call(arguments)),i=n[e].apply(null,l),d=Object.assign({},s,i);a=u.length&&u.length?updateStateAtPath(a,u,d):d;var p=[a,o].concat(Array.prototype.slice.call(arguments));return r.apply(null,p),t(a,o,c),d},o;var o}),l=Object.keys(o||{}).map(function(t){return r={},r[t]=function(){if(u.length){var r=retrieveNestedModel(e,u),n=r.scoped?getNestedObjFromPath(a,u):a,s=r.scoped?getNestedObjFromPath(c,u):c;return o[t].apply(null,[n,s].concat(Array.prototype.slice.call(arguments)))}return o[t].apply(null,[a,c].concat(Array.prototype.slice.call(arguments)))},r;var r});return s.concat(l).reduce(arrayToObj,{})}function o(e,t){if(e.models){var r=Object.keys(e.models).map(function(r){return n={},n[r]=o(e.models[r],t.concat(r)),n;var n}).reduce(arrayToObj,{});return Object.assign({},n(e.reducers,e.effects,t),r)}return n(e.reducers,e.effects,t)}var a=createState(e),c=o(e,[]);return{state:a,actions:c}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=twine;

},{}]},{},[1]);
